let totalBlogPages=0,totalCreativePages=0,totalLaPages=0,currentBlogPage=0,currentCreativePage=0,currentLaPage=0;function attachPageListeners(e,t){const a=new MutationObserver((function(o){o.forEach((function(o){if("childList"===o.type){const o=document.querySelectorAll(e);o.length>0&&(a.disconnect(),o.forEach((function(e){e.dataset.listener||(e.dataset.listener=!0,e.addEventListener("click",(function(a){a.preventDefault(),handlePageClick(e,t)})))})))}}))}));a.observe(document.body,{childList:!0,subtree:!0})}function handlePageClick(e,t){if(e.classList.contains("current"))return;const a="blog"===t?".blog-pages a":"creative"===t?".creative-pages a":"#la-pages a";if(document.querySelectorAll(a).forEach((function(e){e.classList.remove("current")})),e.classList.add("current"),"blog"===t)currentBlogPage=parseInt(e.innerText),loadBlogPost(currentBlogPage-1);else if("creative"===t)currentCreativePage=parseInt(e.innerText),loadCreativePost(currentCreativePage-1);else if("la"===t){const t=e.textContent;"Prev Page"===t?currentLaPage--:"Next Page"===t?currentLaPage++:currentLaPage=parseInt(t)-1,loadLaPost(currentLaPage)}}function updatePageNumbers(e,t,a){"blog"===a?(pagesContainer=document.querySelector(".blog-pages"),totalBlogPages=t):"creative"===a?(pagesContainer=document.querySelector(".creative-pages"),totalCreativePages=t):"la"===a&&(pagesContainer=document.querySelector("#la-pages"),totalLaPages=t),pagesContainer.innerHTML="";let o=e-1,n=e+1;if(o<1&&(o=1,n=Math.min(t,o+2)),n>t&&(n=t,o=Math.max(1,n-2)),"la"===a&&e>1){const e=document.createElement("a");e.href="#",e.textContent="Prev Page",pagesContainer.appendChild(e)}for(let t=o;t<=n;t++)pagesContainer.innerHTML+=`<a href="#"${t===e?' class="current"':""}>${t<10?"0"+t:t}</a>`;if("la"===a&&e<t){const e=document.createElement("a");e.href="#",e.textContent="Next Page",pagesContainer.appendChild(e)}if(document.querySelectorAll(".blog-pages a, .creative-pages a, #la-pages a").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.closest(".blog-pages")?handlePageClick(e,"blog"):e.closest(".creative-pages")?handlePageClick(e,"creative"):e.closest("#la-pages")&&handlePageClick(e,"la")}))})),"la"===a){const e=window.innerHeight,t=-Math.floor(.8*e),a=pagesContainer.getBoundingClientRect().bottom+window.scrollY+t;window.scrollTo({top:a,behavior:"smooth"})}}async function fetchPhotoById(e){const t=await fetch(`https://api.slingacademy.com/v1/sample-data/photos/${e}`);return(await t.json()).photo}async function loadBlogImage(e){try{const t=await fetchPhotoById(Number(e)+18);document.querySelector(".blog-image").style.backgroundImage=`url('${t.url}')`}catch(e){}}function loadBlogPost(e){fetch("../data/blogs.json").then((e=>e.json())).then((t=>{const a=t.blogs[e];totalBlogPages=t.blogs.length,document.querySelector(".blog-time").textContent=a.time,document.querySelector(".blog-time").setAttribute("datetime",a.time),document.querySelector(".blog-title").textContent=a["blog-title"],document.querySelector(".blog-desc").textContent=a["blog-desc"],document.querySelector(".blog-auth").textContent=a["blog-auth"]?`By: ${a["blog-auth"]}`:"",updatePageNumbers(currentBlogPage,totalBlogPages,"blog"),loadBlogImage(e)})).catch((e=>{}))}function loadCreativePost(e){fetch("../data/creatives.json").then((e=>e.json())).then((t=>{const a=t.creatives[e];totalCreativePages=t.creatives.length,document.getElementById("creative").style.backgroundImage=`url('./assets/creatives/${a.image}')`,document.querySelector(".creative-time").textContent=a.time,document.querySelector(".creative-time").setAttribute("datetime",a.time),document.querySelector(".creative-title").textContent=a.title,updatePageNumbers(currentCreativePage,totalCreativePages,"creative")})).catch((e=>{}))}function loadLaPost(e){fetch("../data/larticles.json").then((e=>e.json())).then((t=>{const a=8*e,o=a+8,n=t.articles.slice(a,o);document.querySelectorAll(".article").forEach(((e,t)=>{t>=n.length?(e.classList.remove("shown"),e.querySelector(".article-image").style.backgroundImage="",e.querySelector(".article-time").setAttribute("datetime",""),e.querySelector(".article-time").textContent="",e.querySelector(".article-title").textContent="",e.querySelector(".article-desc").textContent=""):(e.classList.remove("shown"),e.classList.add("popup"),e.querySelector(".article-image").style.backgroundImage=`url('./assets/articles/${n[t].image}')`,e.querySelector(".article-time").setAttribute("datetime",n[t].time),e.querySelector(".article-time").textContent=n[t].time,e.querySelector(".article-title").textContent=n[t].title,e.querySelector(".article-desc").textContent=n[t].desc)})),totalPages=Math.ceil(t.articles.length/8),updatePageNumbers(currentLaPage+1,totalPages,"la")})).catch((e=>{}))}document.addEventListener("DOMContentLoaded",(function(){attachPageListeners(".blog-pages a","blog"),attachPageListeners(".creative-pages a","creative"),attachPageListeners("#la-pages a","la")}));